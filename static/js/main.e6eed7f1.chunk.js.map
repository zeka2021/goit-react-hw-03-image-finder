{"version":3,"sources":["Modal/Modal.module.css","ImageGalleryItem/ImageGalleryItem.module.css","Button/Button.module.css","ImageGallery/ImageGallery.module.css","Modal/Modal.js","Button/Button.js","Searchbar/Searchbar.js","ImageGalleryItem/ImageGalleryItem.js","ImageGallery/ImageGallery.js","Api/imageApi.js","App.js","index.js","Searchbar/Searchbar.module.css"],"names":["module","exports","Modal","state","onModalClick","currentImage","closeModalByEsc","e","code","props","closeModalByBackdropClick","currentTarget","target","window","addEventListener","this","removeEventListener","className","s","Overlay","onClick","src","largeImageURL","alt","tags","split","Component","Button","onSearch","type","Searchbar","query","onSubmit","handleChange","name","value","setState","toLowerCase","handleSubmit","preventDefault","SearchForm","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autocomplete","autofocus","placeholder","onChange","ImageGalleryItem","image","modalImage","description","ImageGalleryItemImage","ImageGallery","images","map","index","id","webformatURL","uuidv4","ImageApi","searchQuery","page","a","fetch","res","ok","message","status","Error","json","hits","totalHits","App","currentPage","totalImages","showModal","showLoader","error","activeImageIndex","modalToggle","handleFormSubmit","toast","theme","loadMoreImages","length","prevProps","prevState","fetchImageOrPhoto","scrollTo","top","document","documentElement","scrollHeight","behavior","color","height","width","timeout","style","textAlign","autoClose","pauseOnFocusLoss","draggable","pauseOnHover","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e6eed7f1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2i4jf\",\"Modal\":\"Modal_Modal__iQShk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__26ym4\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3cowx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__13veQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__23LnD\"};","import { Component } from 'react';\r\nimport s from './Modal.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Modal extends Component {\r\n  state = {\r\n    onModalClick: '',\r\n    currentImage: '',\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.closeModalByEsc);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.closeModalByEsc);\r\n  }\r\n\r\n  closeModalByEsc = e => {\r\n    if (e.code !== 'Escape') {\r\n      return;\r\n    }\r\n\r\n    this.props.onModalClick();\r\n  };\r\n\r\n  closeModalByBackdropClick = e => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onModalClick();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className={s.Overlay} onClick={this.closeModalByBackdropClick}>\r\n        <div className={s.Modal}>\r\n          <img\r\n            src={this.props.currentImage.largeImageURL}\r\n            alt={this.props.currentImage.tags.split(',')[0]}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nModal.propTypes = {\r\n  onModalClick: PropTypes.func.isRequired,\r\n  currentImage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default Modal;","import { Component } from 'react';\r\nimport s from './Button.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Button extends Component {\r\n  state = {\r\n    onSearch: '',\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <button type=\"button\" className={s.Button} onClick={this.props.onSearch}>\r\n        Load more\r\n      </button>\r\n    );\r\n  }\r\n}\r\nButton.propTypes = {\r\n  onSearch: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Button;","import { Component } from 'react';\r\nimport s from './Searchbar.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Searchbar extends Component {\r\n     state = {\r\n         query: '',\r\n         onSubmit: '',\r\n    };\r\n    \r\n  handleChange = e => {\r\n      const { name, value } = e.target;\r\n\r\n    this.setState({ [name]: value.toLowerCase() });\r\n    };\r\n\r\n    handleSubmit = e => {\r\n        e.preventDefault();       \r\n        this.props.onSubmit(this.state.query);\r\n    };\r\n    \r\n    render(){\r\n        return (\r\n            <header className={s.Searchbar}>\r\n                <form onSubmit={this.handleSubmit} className={s.SearchForm}>\r\n                    <button type=\"submit\" className={s.SearchFormButton}>\r\n                        <span className={s.SearchFormButtonLabel}>Search</span>\r\n                    </button>\r\n\r\n                    <input\r\n                        className={s.SearchFormInput}\r\n                        type=\"text\"\r\n                        autocomplete=\"off\"\r\n                        name=\"query\"\r\n                        value={this.state.query}\r\n                        autofocus\r\n                        placeholder=\"Search images and photos\"\r\n                        onChange={this.handleChange}\r\n                    />\r\n                </form>\r\n            </header>\r\n        );\r\n    }\r\n}\r\nSearchbar.propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,\r\n};\r\nexport default Searchbar;","import { Component } from 'react';\r\nimport s from './ImageGalleryItem.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport class ImageGalleryItem extends Component {\r\n    state = {\r\n        image: '',\r\n        modalImage: '',\r\n        description: '',\r\n        onModalClick: '',\r\n        // status: 'idle',\r\n    };\r\n\r\n    render() {\r\n        const { image, modalImage, description, onModalClick } = this.props;\r\n        return (\r\n            <li className={s.ImageGalleryItem} onClick={onModalClick}>\r\n\r\n                <img src={image}\r\n                    alt={description}\r\n                    data-src={modalImage}\r\n                    className={s.ImageGalleryItemImage} />\r\n            </li>\r\n        );\r\n    }\r\n}\r\nImageGalleryItem.propTypes = {\r\n    image: PropTypes.string.isRequired,\r\n    modalImage: PropTypes.string.isRequired,\r\n    description: PropTypes.string,\r\n    onModalClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;","import { Component } from 'react';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport ImageGalleryItem from '../ImageGalleryItem';\r\nimport s from './ImageGallery.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\nclass ImageGallery extends Component {\r\n    state = {\r\n        images: '',\r\n        onModalClick: '',\r\n    }\r\n   \r\n    render() {\r\n        return (\r\n            <ul className={s.ImageGallery}>\r\n                {this.props.images.map(\r\n                    ({ id, webformatURL, largeImageURL, tags }, index) => (\r\n                        <ImageGalleryItem\r\n                            onModalClick={() => this.props.onModalClick(index)}\r\n                            key={`${id}}-${uuidv4()}`}\r\n                            image={webformatURL}\r\n                            modalImage={largeImageURL}\r\n                            description={tags.split(',')[0]}\r\n                        />\r\n                    ),\r\n                )}\r\n            </ul>\r\n        );\r\n    }\r\n}\r\nImageGallery.propTypes = {\r\n    images: PropTypes.arrayOf(PropTypes.object),\r\n    onModalClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGallery;","const API_KEY = '22797563-ef7ac6a65cc3c0715a95e250f';\r\nconst BASE_URL = 'https://pixabay.com/api';\r\n\r\nclass ImageApi {\r\n  async fetchImageOrPhoto(searchQuery, page) {\r\n    const res = await fetch(\r\n      `${BASE_URL}/?q=${searchQuery}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\r\n    );\r\n\r\n    if (!res.ok) {\r\n      const message = `An error has occured: ${res.status}`;\r\n      throw new Error(message);\r\n    }\r\n\r\n    const { hits, totalHits } = await res.json();\r\n    return { hits, totalHits };\r\n  }\r\n}\r\n\r\nexport default ImageApi;","import { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport { ToastContainer, toast } from 'react-toastify';\nimport Modal from './Modal';\nimport Button from './Button';\nimport Searchbar from './Searchbar';\nimport ImageGallery from './ImageGallery/ImageGallery';\nimport ImageApi from './Api/imageApi';\nimport './App.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nconst image = new ImageApi();\n\nclass App extends Component {\n  state = {\n     query: '',\n    images: [],\n    currentPage: 1,\n    totalImages: null,\n    showModal: false,\n    showLoader: false,\n    error: null,\n    activeImageIndex: null,\n  };\n\n  async componentDidUpdate(prevProps, prevState) {\n    if (\n      prevState.query !== this.state.query ||\n      prevState.currentPage !== this.state.currentPage\n    ) {\n      try {\n        this.setState({ showLoader: true });\n        const { hits, totalHits } = await image.fetchImageOrPhoto(\n          this.state.query,\n          this.state.currentPage,\n        );\n\n        if (!hits.length) {\n          toast.error('Enter proper query', { theme: 'colored' });\n        }\n\n        this.setState(({ images }) => {\n          return {\n            images: [...images, ...hits],\n            totalImages: totalHits,\n          };\n        });\n      } catch (error) {\n        this.setState({ error });\n        toast.error(this.state.error.message, { theme: 'colored' });\n      } finally {\n        if (prevState.images.length > 11) {\n          window.scrollTo({\n            top: document.documentElement.scrollHeight,\n            behavior: 'smooth',\n          });\n        }\n\n        this.setState({ showLoader: false });\n      }\n    }\n  }\n\n  modalToggle = index => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n      activeImageIndex: index,\n    }));\n  };\n\n  handleFormSubmit = value => {\n    if (value === '') {\n      toast.error('No query entered yet...', { theme: 'colored' });\n      return;\n    }\n\n    this.setState({ query: value, images: [], currentPage: 1 });\n  };\n\n  loadMoreImages = e => {\n    if (this.state.images.length === this.state.totalImages) {\n      toast.error('There is no more images to show', { theme: 'colored' });\n      return;\n    }\n\n    this.setState(({ currentPage }) => ({ currentPage: currentPage + 1 }));\n  };\n  render() {\n    return (\n      <>\n        <div className=\"App\">\n          <Searchbar onSubmit={this.handleFormSubmit} />\n\n          {this.state.images.length > 1 && (\n            <>\n              <ImageGallery\n                images={this.state.images}\n                onModalClick={this.modalToggle}\n              />\n              {!this.state.showLoader && (\n                <Button onSearch={this.loadMoreImages} />\n              )}\n            </>\n          )}\n\n          {this.state.showLoader && (\n            <Loader\n              type=\"ThreeDots\"\n              color=\"#00BFFF\"\n              height={80}\n              width={80}\n              timeout={3000}\n              style={{ textAlign: 'center' }}\n            />\n          )}\n\n          {this.state.showModal && (\n            <Modal\n              currentImage={this.state.images[this.state.activeImageIndex]}\n              onModalClick={this.modalToggle}\n            />\n          )}\n        </div>\n\n        <ToastContainer\n          autoClose={3000}\n          pauseOnFocusLoss={false}\n          draggable={false}\n          pauseOnHover={false}\n        />\n      </>\n    );\n  }\n\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'normalize.css';\nimport 'react-toastify/dist/ReactToastify.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3fa0H\",\"SearchForm\":\"Searchbar_SearchForm__MoyYY\",\"SearchFormButton\":\"Searchbar_SearchFormButton__3dKJB\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__uS3tS\",\"SearchFormInput\":\"Searchbar_SearchFormInput__2SlUV\"};"],"sourceRoot":""}